<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Congratulations, my friend!</title>
<meta name="generator" content="Org mode" />
<link rel="stylesheet" href="https://ahisu6.github.io/assets/css/main.css" />
</head>
<body>
<div id="content">
<div class="engt">Congratulations, my friend!</div>
<div class="japt">おめでとう、我が友よ！</div>

<p>
<a href="https://github.com/ahisu6/ahisu6.github.io/edit/main/src/congratulations.org">Edit</a>
</p>

<p>
<a href="../index.html">Home</a>
</p>

<hr />

<p>
Well done my friend, you did it! <span class="ja">よくやった私の友人、あなたはそれをしました!</span>
</p>

<style>
body {
  background-color: #141518;
  color: #e9e9cf;
}

.container {
  display: flex;
  align-content: center;
  justify-content: center;
  height: 100vh;
}

.btn {
  color: rgb(16,24,50);
  cursor: pointer;
  display: inline-block;
  letter-spacing: 0.075em;
  padding: .8em 1em;
  margin: auto 2em;
  position: fixed;
  align-self: center;
  text-transform: uppercase;
  border: 3px #00bcdd solid;
  border-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
  border-image-slice: 1 1 0 0;
  z-index: 1;
  box-shadow: -0.5em .5em transparentize(rgb(16,24,50),1);
  transform-origin: left bottom;
  transition: all 200ms ease-in-out;
}

.btn:before,
.btn:after {
  border: 3px #00bcdd solid;
  content: '';
  display: block;
  position: absolute;
  z-index: -1;
}

.btn:before {
  border-image: linear-gradient(45deg, #00bcdd 0%, adjust-hue(#00bcdd,10%) 100%);
  border-image-slice: 1 1 0 1;
  left: -0.59em; top: .15em;
  width: .31em;
  height: 100%;
  transform: skewY(-45deg);
}

.btn:after {
  border-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
  border-image-slice: 1 1 1 0;
  bottom: -0.61em; right: 0.16em;
  width: 100%;
  height: .31em;
  transform: skewX(-45deg);
}

.btn:hover {
  background-color: white;
  background-size: 90%;
  transform: translate(0.5em,-0.5em);
  box-shadow: -1em 1em .15em transparentize(rgb(16,24,50),.9);
}

.btn:hover:before {
  height: calc(100% - .13em);
  border-image-slice: 1;
  background-image: linear-gradient(45deg, #00bcdd 0%, adjust-hue(#00bcdd,10%) 100%);
}

.btn:hover:after {
  width: calc(100% - .13em);
  border-image-slice: 1;
  background-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
}

.cta {
  background-color: #00bcdd;
  background-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
  border-image: linear-gradient(45deg, lighten(#00bcdd,20%) 0%, lighten(#ff00ff,20%) 100%);
  border-image-slice: 1;
  color: white;
}

.cta:before {
  border-image-slice: 1;
  background-image: linear-gradient(45deg, #00bcdd 0%, adjust-hue(#00bcdd,10%) 100%);
  left: -0.75em;
  top: .15em;
}

.cta:after {
  border-image-slice: 1;
  background-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
  bottom: -0.75em;
  right: .15em;
}

.cta:hover {
  background: white;
  border-image: linear-gradient(45deg, #00bcdd 0%, #ff00ff 100%);
  border-image-slice: 1;
  color: rgb(16,24,50);
}

.cta:hover:before {
  height: 100%;
}

.cta:hover:after {
  width: 100%;
}

.bg {
  background: none;
  border: 3px solid rgb(16,24,50);
  color: rgb(16,24,50);
}

.bg:before,
.bg:after {
  background: rgb(16,24,50);
  border: 3px solid rgb(16,24,50);
}

.bg:hover {
  border-image: none;
}

.bg:hover:before,
.bg:hover:after {
  background: rgb(16,24,50);
}
</style>

<button class="btn cta" onclick="startConfetti()">おめでとう、我が友よ！</button>
<canvas id="confetti"></canvas>

<script>
function startConfetti() {

  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  const colors = ["#ff0000", "#00ff00", "#0000ff", "#ffff00", "#00ffff"]; // Array of confetti colors
  const confettiCount = 100; // Number of confetti particles
  let colorIndex = 0; // Index to keep track of the current color
  let currentColor = colors[colorIndex]; // Current color value
  let nextColor = colors[(colorIndex + 1) % colors.length]; // Next color value
  let transitionStep = 0.01; // Step for transitioning colors
  let transitionProgress = 0; // Progress of transitioning colors

  // Function to generate a random number within a range
  function randomInRange(min, max) {
    return Math.random() * (max - min) + min;
  }

  // Set the canvas size to match the window
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;


  // Function to create a confetti particle
  function createConfetti() {
    const x = randomInRange(0, canvas.width);
    const y = randomInRange(-canvas.height, 0);
    const color = colors[Math.floor(Math.random() * colors.length)];
    const speed = randomInRange(2, 5);
    const angle = randomInRange(0, 2 * Math.PI);
    return { x, y, color, speed, angle };
  }

  // Array to store the confetti particles
  const confetti = [];

  // Create the confetti particles
  for (let i = 0; i < confettiCount; i++) {
    confetti.push(createConfetti());
  }

// Function to animate the confetti particles
function animateConfetti() {
  
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Loop through each confetti particle
  for (let i = 0; i < confetti.length; i++) {
    const particle = confetti[i];

    // Update the position of the particle
    particle.y += particle.speed;
    particle.x += Math.sin(particle.angle) * 2;

    // Draw the particle on the canvas
    ctx.beginPath();
    ctx.arc(particle.x, particle.y, 5, 0, 2 * Math.PI);
    ctx.fillStyle = particle.color;
    ctx.fill();
  }


  // Draw the word "Congratulations"
  ctx.font = "bold 80px monospace";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillStyle = currentColor; // Use the current color
  ctx.fillText("あなたは試験で本当に", canvas.width / 2, canvas.height / 5);
  ctx.fillText(" 素晴らしい結果を残した。", canvas.width / 2, canvas.height / 3);
  ctx.fillText("よくやった！", canvas.width / 2, canvas.height / 1.8);

  // Transition between colors
  transitionProgress += transitionStep;
  if (transitionProgress >= 1) {
    colorIndex = (colorIndex + 1) % colors.length; // Update the color index to the next color in the array
    currentColor = nextColor;
    nextColor = colors[(colorIndex + 1) % colors.length];
    transitionProgress = 0;
  } else {
    currentColor = transitionColor(currentColor, nextColor, transitionProgress);
  }

  // Check if all confetti particles have reached the bottom of the screen
  const allParticlesGone = confetti.every((particle) => particle.y >= canvas.height);

  if (allParticlesGone) {
    // Fade out the word "Congratulations"
    ctx.globalAlpha -= 0.01; // Reduce the alpha value by 0.01 to fade out gradually
    setTimeout(function() {
    location.reload(); // Reload the page to reset all JavaScript values
    }, 2000);
    
  }

  // Request animation frame to continue the animation
  requestAnimationFrame(animateConfetti);
}


  // Function to transition between colors smoothly
  function transitionColor(startColor, endColor, progress) {
    const startRGB = hexToRGB(startColor);
    const endRGB = hexToRGB(endColor);
    const transitionRGB = [];
    for (let i = 0; i < 3; i++) {
      transitionRGB[i] = Math.round(startRGB[i] + (endRGB[i] - startRGB[i]) * progress);
    }
    return RGBToHex(transitionRGB);
  }

  // Helper function to convert hex color to RGB array
  function hexToRGB(hex) {
    const r = parseInt(hex.slice(1, 3), 16);
    const g = parseInt(hex.slice(3, 5), 16);
    const b = parseInt(hex.slice(5, 7), 16);
    return [r, g, b];
  }

  // Helper function to convert RGB array to hex color
  function RGBToHex(rgb) {
    return "#" + rgb.map((color) => color.toString(16).padStart(2, "0")).join("");
  }

  // Start the confetti animation
  animateConfetti();
}
</script>
</div>
</body>
</html>
